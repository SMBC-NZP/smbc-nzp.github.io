filter(enc == 'B') %>%
select(bandNumber, siteID, spp, mass, age, sex),
by = 'bandNumber'
) %>% filter(is.na(sex))
bandingRecords %>% filter(bandNumber == '2251-80348')
encountersLong %>%
mutate(enc = 1) %>%
spread(key = year, value = enc, fill = 0) %>%
unite(ch, -bandNumber, sep = '') %>%
left_join(
bandingRecords %>%
filter(enc == 'B') %>%
select(bandNumber, siteID, spp, mass, age, sex),
by = 'bandNumber'
) %>% filter(bandNumber == '2251-80348')
bandingRecords <-
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc == 'R' & date == min(date)))
resights <-
read_csv('https://www.dropbox.com/s/psp8ssrwwopaz5l/resights.csv?dl=1') %>%
filter(bandNumber %in% bandingRecords$bandNumber)
encountersLong <-
bind_rows(
bandingRecords %>%
select(bandNumber, date),
resights %>%
select(bandNumber, date)
) %>%
transmute(
bandNumber,
year = year(date)) %>%
distinct
bandingRecords <-
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc == 'R' & date == min(date))) %>%
ungroup
resights <-
read_csv('https://www.dropbox.com/s/psp8ssrwwopaz5l/resights.csv?dl=1') %>%
filter(bandNumber %in% bandingRecords$bandNumber)
encountersLong <-
bind_rows(
bandingRecords %>%
select(bandNumber, date),
resights %>%
select(bandNumber, date)
) %>%
transmute(
bandNumber,
year = year(date)) %>%
distinct
encounterHistory <-
encountersLong %>%
mutate(enc = 1) %>%
spread(key = year, value = enc, fill = 0) %>%
unite(ch, -bandNumber, sep = '') %>%
left_join(
bandingRecords %>%
filter(enc == 'B') %>%
select(bandNumber, siteID, spp, mass, age, sex),
by = 'bandNumber'
) %>%
select(-bandNumber) %>%
left_join(
sites,
by = 'siteID'
) %>%
select(-siteID)
enocunterHistor
enocunterHistory
encounterHistory
encounterHistory$sex %>% unique
encounterHistory %>% filter(is.na(sex))
encountersLong %>% filter(is.na(sex))
encountersLong %>%
mutate(enc = 1) %>%
spread(key = year, value = enc, fill = 0) %>%
unite(ch, -bandNumber, sep = '') %>%
left_join(
bandingRecords %>%
filter(enc == 'B') %>%
select(bandNumber, siteID, spp, mass, age, sex),
by = 'bandNumber'
) %>% filter(is.na(sex))
bandingRecords %>% filter(bandNumber == '2251-80348')
bandingRecords <-
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc == 'R' & date == min(date))) %>%
ungroup
bandingRecords %>% filter(bandNumber == '2251-80348')
bandingRecords <-
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc != 'B' & date == min(date))) %>%
ungroup
bandingRecords %>% filter(bandNumber == '2251-80348')
bandingRecords <-
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc != 'B' & date == min(date))) %>%
filter(!bandNumber == '2251-80348') %>%
ungroup
bandingRecords %>% filter(bandNumber == '2251-80348')
resights <-
read_csv('https://www.dropbox.com/s/psp8ssrwwopaz5l/resights.csv?dl=1') %>%
filter(bandNumber %in% bandingRecords$bandNumber)
resights %>% filter(bandNumber == '2251-80348')
encountersLong <-
bind_rows(
bandingRecords %>%
select(bandNumber, date),
resights %>%
select(bandNumber, date)
) %>%
transmute(
bandNumber,
year = year(date)) %>%
distinct
encountersLong %>% filter(is.na(sex))
encounterHistory <-
encountersLong %>%
mutate(enc = 1) %>%
spread(key = year, value = enc, fill = 0) %>%
unite(ch, -bandNumber, sep = '') %>%
left_join(
bandingRecords %>%
filter(enc == 'B') %>%
select(bandNumber, siteID, spp, mass, age, sex),
by = 'bandNumber'
) %>%
select(-bandNumber) %>%
left_join(
sites,
by = 'siteID'
) %>%
select(-siteID)
encounterHistory %>% filter(is.na(sex))
encounterHistory %>% .$sex %>% unique()
encounterHistory %>% .$region %>% unique()
encounterHistory_noca <-
encounterHistory %>%
filter(spp == 'NOCA')
noca.proc <-
encounterHistory_noca %>%
data.frame %>%
select(ch, sex) %>%
process.data
noca.proc
noca.ddl <-
noca.proc %>%
make.design.data
noca.ddl
Phi_sex <-
list(formula = ~sex)
crm(
data = noca.proc,
ddl = noca.ddl,
model.parameters = list(Phi = Phi_sex),
accumulate = FALSE)
dim(noca_simple.proc$data)
dim(noca.proc)
dim(noca.proc$data)
noca.ddl
?make.design.data
model_sexPhi <-
crm(
data = noca.proc,
ddl = noca.ddl,
model.parameters = list(Phi = Phi_sex),
accumulate = FALSE)
model_sexPhi
cjs.hessian(model_sexPhi)
AIC(model_sexPhi)
aic(model_sexPhi)
model_sexPhi
model_sexPhi@aic
model_sexPhi@AIC
model_sexPhi$AIC
?crm
model_null <-
crm(noca_simple.proc)
model_null
model_sexPhi
```{r}
fit_models <-
function(){
Phi_dot <-
list(formula = ~ 1)
Phi_sex <-
list(formula ~sex)
p_dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = dipper.proc,
ddl = dipper.ddl,
external = FALSE,
accumulate = FALSE
)
return(results)
}
fit_models <-
function(){
Phi_dot <-
list(formula = ~ 1)
Phi_sex <-
list(formula ~sex)
p_dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE
)
return(results)
}
fit.models()
fit_models()
fit_models <-
function(){
Phi.dot <-
list(formula = ~ 1)
Phi.sex <-
list(formula ~sex)
p.dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE
)
return(results)
}
fit_models()
fit_models <-
function(){
# Phi.dot <-
#   list(formula = ~ 1)
Phi.sex <-
list(formula ~sex)
p.dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE
)
return(results)
}
fit_models()
cml
Phi.sex <-
list(formula ~sex)
p.dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
cml
fit_models <-
function(){
Phi.dot <-
list(formula = ~ 1)
Phi.sex <-
list(formula = ~sex)
p.dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE
)
return(results)
}
fit_models()
crm(
data = noca.proc,
ddl = noca.ddl,
model.parameters = list(Phi = Phi.sex),
accumulate = FALSE)
noca.ddl <-
noca.proc %>%
make.design.data
modList <-
fit_models()
modList[[1]]
compute.real(modList[[1]])
compute.real(modList[[2]])
names(modList)
compute.real(modList[[2]], vcv = TRUE)
compute.real(modList[[2]], vcv = TRUE, se = TRUE)
compute.real(modList[[2]],'Phi', vcv = TRUE, se = TRUE)
compute.real(cjs.hession(modList[[2]]),'Phi', vcv = TRUE, se = TRUE)
compute.real(cjs.hessian(modList[[2]]),'Phi', vcv = TRUE, se = TRUE)
crm(noca_simple.proc, hessian = TRUE)
crm(noca_simple.proc, hessian = TRUE) %>%
compute.real
model_sexPhi <-
crm(
data = noca.proc,
ddl = noca.ddl,
model.parameters = list(Phi = Phi.sex),
accumulate = FALSE,
hessian = TRUE)
model_sexPhi
noca.ddl <-
noca.proc %>%
make.design.data
Phi.sex <-
list(formula = ~sex)
model_sexPhi <-
crm(
data = noca.proc,
ddl = noca.ddl,
model.parameters = list(Phi = Phi.sex),
accumulate = FALSE,
hessian = TRUE)
model_sexPhi
fit_models <-
function(){
Phi.dot <-
list(formula = ~ 1)
Phi.sex <-
list(formula = ~sex)
p.dot <-
list(formula = ~1)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE,
hessian = TRUE
)
return(results)
}
modList <-
fit_models()
modList
compute.real(model_sexPhi)
noca.proc <-
encounterHistory_noca %>%
data.frame %>%
# select(ch, sex) %>%
process.data
noca.ddl <-
noca.proc %>%
make.design.data
noca.proc <-
encounterHistory_noca %>%
data.frame %>%
select(ch, sex, region) %>%
process.data
noca.ddl <-
noca.proc %>%
make.design.data
fit_models <-
function(){
Phi.dot <-
list(formula = ~ 1)
Phi.sex <-
list(formula = ~sex)
p.dot <-
list(formula = ~1)
p.region <-
list(formula = ~region)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE,
hessian = TRUE
)
return(results)
}
modList_sexRegion <-
fit_models()
modList_sexRegion
names(modList_sexRegion)
compute.real(modList_sexRegion$Phi.sex.p.region)
fit_models <-
function(){
Phi.dot <-
list(formula = ~ 1)
Phi.sex <-
list(formula = ~sex)
Phi.region <-
list(formula = ~region)
Phi.sex.region <-
list(formula = ~sex + region)
p.dot <-
list(formula = ~1)
p.region <-
list(formula = ~region)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE,
hessian = TRUE
)
return(results)
}
modList_sexRegion_additive <-
fit_models()
modList_sexRegion_additive
names(modList_sexRegion_additive)
compute.real(modList_sexRegion$Phi.sex.region.p.region)
compute.real(modList_sexRegion_additive$Phi.sex.region.p.region)
fit_models <-
function(){
Phi.dot <-
list(formula = ~ 1)
Phi.sex <-
list(formula = ~sex)
Phi.region <-
list(formula = ~region)
Phi.sex.region <-
list(formula = ~sex + region)
p.dot <-
list(formula = ~1)
p.region <-
list(formula = ~region)
p.sex <-
list(formula = ~sex)
p.sex.region <-
list(formula = ~sex+region)
cml <-
create.model.list(c('Phi','p'))
results <-
crm.wrapper(
cml,
data = noca.proc,
ddl = noca.ddl,
external = FALSE,
accumulate = FALSE,
hessian = TRUE
)
return(results)
}
modList_sexRegion_additive <-
fit_models()
modList_sexRegion_additive
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc != 'B' & date == min(date))) %>%
filter(!bandNumber == '2251-80348') %>%
ungroup %>% write_csv('bandingRecords.csv)
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')  %>%
filter(sex != 'noData') %>%
filter(!is.na(sex)) %>%
group_by(bandNumber) %>%
filter(!(enc != 'B' & date == min(date))) %>%
filter(!bandNumber == '2251-80348') %>%
ungroup %>%
write_csv('bandingRecords.csv')
read_csv('https://www.dropbox.com/s/psp8ssrwwopaz5l/resights.csv?dl=1') %>%
filter(bandNumber %in% bandingRecords$bandNumber) %>%
write_csv('resights.csv')
bandingRecords <-
read_csv('https://www.dropbox.com/s/fxiyavgbmwtfmrz/bandingRecords.csv?dl=1')
install.packages('prism')
install.pacakges(RCurl)
install.packages(RCurl)
install.packages('RCurl')
